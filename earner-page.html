<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">    
  <title>SociHub Home</title>
  <style>
    body {
      font-family: Poppins, sans-serif;
      margin: 0;
      padding: 15px;
      background: #f4f4f4;
    }
    .welcome {
  font-size: 14px;
  font-weight: 200;
  margin-bottom: 15px;
}

.balance-card {
  background: #fff;
  padding: 15px;
  border-radius: 12px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  margin-bottom: 50px;
}

.balance-header {
  font-size: 18px;
  font-weight: 600;
}

.balance-amount {
  font-size: 24px;
  font-weight: 700;
  margin: 10px 0;
}

.withdraw-btn {
  background: #00cc88;
  color: #fff;
  font-size: 10px;
  border: none;
  padding: 10px 18px;
  border-radius: 8px;
  float: right;
  cursor: pointer;
}
.transcation-history {
  border: 1px solid #00cc88;
  color: #00cc88;
  padding: 10px 18px;
  border-radius: 8px;
  float: left;
  cursor: pointer;
  font-size:10px;
}p
.stats-section {
  margin-bottom: 30px ;
}

.stats-wrapper {
  margin-top: 50px;
  margin-bottom: 60px;
  display: flex;
  gap: 10px;
}

/* LEFT PERCENTAGE LABELS */
.percent-labels {
    position: relative;
  left: 0;
  bottom: 25px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 8px;
  height: 180px;
  font-size: 10px;
  color: #666;
}

/* AREA HOLDING LINES + BARS */
.stats-area {
  position: relative;
  width: 100%;
}

/* HORIZONTAL GUIDE LINES */
.horizontal-lines {
  position: absolute;
  left: 0;
  top: -17px;
  width: 100%;
  height: 180px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  pointer-events: none;
}

.horizontal-lines div {
  width: 100%;
  height: 1px;
  background: #ccc; /* Line color */
  opacity: 0.4;
}

/* BARS */
.stats-bars {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  height: 180px;
  padding-left: 10px; 
}

.bar {
  width: 20px;
  border-radius: 6px 6px 0 0;
  position: relative;
  z-index: 5;   /* âœ… BAR COMES FRONT */
}

/* LABEL UNDER BAR */
.bar-label {
  margin-top: 5px;
  font-size: 10px;
  text-align: center;
  margin-left: -10px;
}

.pending-tasks, .available-tasks {
  background: #fff;
  padding: 15px;
  border-radius: 12px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  margin-bottom: 20px;
}

.task-item {
  padding: 10px 0;
  border-bottom: 1px solid #eee;
  font-size: 15px;
}

.task-item:last-child {
  border-bottom: none;
}

.available-header {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 10px;
}
h1 {
  font-size: 2rem;
  margin-top: 20px auto;
  color: #00cc88;
  position: relative;
  top: -35px;
  right: 15px;
  width: 100%;
  padding: 10px;
  border-radius: 9px;
  box-shadow: 0 0 3px rgba(0,0,0,0.01);
}
h1 i{
  position: absolute;
  right: 9px;
  bottom: 22px;
  font-size: 22px;
}
  </style>
</head>
<body>
  <h1>SociHub<i class="fas fa-bars icon left-icon" id="openMenu"></i></h1>
  <div class="welcome">Welcome, <span id="Username">user</span> ðŸ‘‹</div>  <div class="balance-card">
    <div class="balance-header">Balance</div>
    <div class="balance-amount" id="balance">â‚¦0.00</div>
    <button class="transcation-history">Transcations</button>
    <button class="withdraw-btn">Withdraw</button>
    <div style="clear: both"></div>
  </div>  <div class="stats-section">
    <h3>Task Statistics</h3>
    
<div class="stats-wrapper">
  <!-- LEFT PERCENTAGE LABELS -->
  <div class="percent-labels">
    <div>100%</div>
    <div>90%</div>
    <div>80%</div>
    <div>70%</div>
    <div>60%</div>
    <div>50%</div>
    <div>40%</div>
    <div>30%</div>
    <div>20%</div>
    <div>10%</div>
  </div>

  <!-- BARS + HORIZONTAL LINES -->
  <div class="stats-area">
    <div class="horizontal-lines">
      <div></div><div></div><div></div><div></div><div></div>
      <div></div><div></div><div></div><div></div><div></div>
    </div>

    <div class="stats-bars">
      <div style="text-align:center;">
        <div class="bar" style="height:120px; background: blue;"></div>
        <div class="bar-label">Available</div>
      </div>

      <div style="text-align:center;">
        <div class="bar" style="height:90px; background: #00cc88;"></div>
        <div class="bar-label">Completed</div>
      </div>

      <div style="text-align:center;">
        <div class="bar" style="height:50px; background: red;"></div>
        <div class="bar-label">Rejected</div>
      </div>

      <div style="text-align:center;">
        <div class="bar" style="height:70px; background: #e8d400b7;"></div>
        <div class="bar-label">Pending</div>
      </div>

      <div style="text-align:center;">
        <div class="bar" style="height:10px; background: black;"></div>
        <div class="bar-label">Flagged</div>
      </div>
    </div>
  </div>
</div>
  </div>  <div class="available-tasks">
    <div class="available-header">Available Tasks (5)</div>
    <div class="task-item">Follow on tiktok</div>
    <div class="task-item">Task 2</div>
    <div class="task-item">Task 3</div>
    <div class="task-item">Task 4</div>
    <div class="task-item">Task 5</div>
  </div>  <div class="pending-tasks">
    <h3>Pending Tasks</h3>
    <div class="task-item">Pending Task 1</div>
    <div class="task-item">Pending Task 2</div>
    <div class="task-item">Pending Task 3</div>
    <div class="task-item">Pending Task 4</div>
    <div class="task-item">Pending Task 5</div>
  </div>
  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

// âœ… Your Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyAK4b3ASYB0USFC6cNQiQ9DA3_ROS48RYI",
  authDomain: "socihub-a2731.firebaseapp.com",
  projectId: "socihub-a2731",
  storageBucket: "socihub-a2731.firebasestorage.app",
  messagingSenderId: "815252223754",
  appId: "1:815252223754:web:99a26383a59c2557412cf3",
  measurementId: "G-KXW58D7RGM"
};

// âœ… Init Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// âœ… DOM elements
const usernameDisplay = document.getElementById("Username");
const balanceDisplay = document.getElementById("balance");
const menuBtn = document.getElementById("openMenu");


    
const closeBtn = document.querySelector(".close-menu");    
const sideMenu = document.getElementById("side-menu");    
    
menuBtn.addEventListener("click", () => sideMenu.classList.add("active"));    
closeBtn.addEventListener("click", () => sideMenu.classList.remove("active"));   

// âœ… Detect logged-in user
onAuthStateChanged(auth, async (user) => {
  if (user) {
    const userDoc = await getDoc(doc(db, "users", user.uid));

    if (userDoc.exists()) {
      const data = userDoc.data();

      usernameDisplay.textContent = data.name;
      balanceDisplay.textContent = "â‚¦" + (data.balance ?? 0).toFixed(2);

      // âœ… Only allow earners
      if (data.role !== "earner") {
        window.location.href = "no_access.html";  // Prevent wrong role
      }

    } else {
      window.location.href = "1page.html";
    }
  } else {
    window.location.href = "1page.html";
  }
});
</script>
</body>
</html>